---
alwaysApply: true
priority: HIGH
---

# MANDATORY TEMPLATES - Copy Exactly

## Template 1: Logger Pattern (Back Project ONLY)
```csharp
using R_CommonFrontBackAPI.Log;

namespace {ProgramName}Back
{
    public class Logger{ProgramName} : R_NetCoreLoggerBase<Logger{ProgramName}>
    {
        // Empty - base class provides all functionality
    }
}
```

## Template 2: Activity Pattern (Back Project ONLY)
```csharp
using R_OpenTelemetry;

namespace {ProgramName}Back
{
    public class {ProgramName}Activity : R_ActivitySourceBase
    {
        // Empty - base class provides all functionality
    }
}
```

## Template 3: Interface Pattern
```csharp
public interface I{ProgramName} : R_IServiceCRUDAsyncBase<{ProgramName}DTO>
{
    // Streaming methods - NO parameters (RULE #34)
    IAsyncEnumerable<{GetListResultDTO}> GetList{Description}();
    
    // Non-streaming methods - WITH parameters
    Task<{ProgramName}ResultDTO<{GetAnythingResultDTO}>> GetAnything({GetAnythingParameterDTO} poParameter);
}
```

## Template 4: Database Operation Pattern
```csharp
R_Db? loDb = null;
try
{
    loDb = new R_Db();
    using var loConn = await loDb.GetConnectionAsync();
    using var loCmd = loDb.GetCommand();
    
    loDb.R_AddCommandParameter(loCmd, "@PARAM", DbType.String, size, value);
    var loDataTable = await loDb.SqlExecQueryAsync(loConn, loCmd, true);
}
finally
{
    if (loDb != null) { loDb = null; }
}
```

## Template 5: Service Layer Pattern (Streaming - NO Parameters)
```csharp
[HttpPost]
public async IAsyncEnumerable<{ResultDTO}> GetList{Description}()
{
    var lcMethod = nameof(GetList{Description});
    using var activity = _activitySource.StartActivity(lcMethod);
    var loEx = new R_Exception();
    var loCls = new {ProgramName}Cls();
    List<{ResultDTO}> loResult = new List<{ResultDTO}>();

    try
    {
        _logger.LogInfo("Start method GetList{Description}Async in {0}", lcMethod);

        // Create parameter DTO and populate from streaming context
        var loParam = new {ProgramName}GetList{Description}ParameterDTO
        {
            CCOMPANY_ID = R_BackGlobalVar.COMPANY_ID,
            CDEPT_CODE = R_Utility.R_GetStreamingContext<string>("CDEPT_CODE") ?? string.Empty,
            CTRANSACTION_CODE = R_Utility.R_GetStreamingContext<string>("CTRANSACTION_CODE") ?? string.Empty
        };

        loResult = await loCls.GetList{Description}Async(loParam);
    }
    catch (Exception ex)
    {
        loEx.Add(ex);
        _logger.LogError(loEx);
    }

    loEx.ThrowExceptionIfErrors();

    foreach ({ResultDTO} loItem in loResult)
    {
        yield return loItem;
    }
}
```

## Template 6: Model Pattern
```csharp
public class {ProgramName}Model : R_BusinessObjectServiceClientBase<{ProgramName}DTO>, I{ProgramName}
{
    private const string DEFAULT_HTTP_NAME = "R_DefaultServiceUrl{ModuleName}";
    private const string DEFAULT_SERVICEPOINT_NAME = "api/{ProgramName}";
    private const string DEFAULT_MODULE = "{ModuleName}";

    public {ProgramName}Model()
        : base(DEFAULT_HTTP_NAME, DEFAULT_SERVICEPOINT_NAME, DEFAULT_MODULE, true, true)
    {
    }

    public IAsyncEnumerable<{ResultDTO}> GetList{Description}()
    {
        throw new System.NotImplementedException();
    }

    public async Task<{ProgramName}ResultDTO<List<{ResultDTO}>>> GetList{Description}Async()
    {
        var loEx = new R_Exception();
        {ProgramName}ResultDTO<List<{ResultDTO}>> loRtn = new {ProgramName}ResultDTO<List<{ResultDTO}>>();

        try
        {
            R_HTTPClientWrapper.httpClientName = _HttpClientName;
            loRtn.Data = await R_HTTPClientWrapper.R_APIRequestStreamingObject<{ResultDTO}>(
                _RequestServiceEndPoint,
                nameof(I{ProgramName}.GetList{Description}),
                _ModuleName,
                true,
                true
            );
        }
        catch (Exception ex)
        {
            loEx.Add(ex);
        }

        loEx.ThrowExceptionIfErrors();
        return loRtn;
    }
}
```

## Template 7: R_ComboBox Pattern (Correct Parameters)
```razor
<R_ComboBox Data="@viewModel.DataList"
            @bind-Value="@viewModel.SelectedValue"
            ValueField="@nameof(DTO.PropertyName)"
            TextField="@nameof(DTO.DisplayName)">
</R_ComboBox>
```

## Template 8: R_Grid Pattern (Inquiry - No Conductor)
```razor
<R_Grid @ref="@_gridRef"
        DataSource="@viewModel.DataList"
        R_GridType="@R_eGridType.Original"
        R_ServiceGetListRecord="@Grid_ServiceGetListRecord">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(DTO.Property)" HeaderText="Header"></R_GridTextColumn>
    </R_GridColumns>
</R_Grid>
```

## Template 9: R_Grid Pattern (CRUD in Form - With Conductor)
```razor
<R_Grid @ref="@_gridRef"
        DataSource="@viewModel.DataList"
        R_ConductorSource="@_conductorRef"
        R_GridType="@R_eGridType.Navigator"
        R_ServiceGetListRecord="@Grid_ServiceGetListRecord">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(DTO.Property)" HeaderText="Header"></R_GridTextColumn>
    </R_GridColumns>
</R_Grid>
```

## Template 10: R_Grid Pattern (CRUD in Grid - With ConductorGrid)
```razor
<R_Grid @ref="@_gridRef"
        DataSource="@viewModel.DataList"
        R_ConductorGridSource="@_conductorGridRef"
        R_GridType="@R_eGridType.Original"
        R_ServiceGetListRecord="@Grid_ServiceGetListRecord">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(DTO.Property)" HeaderText="Header"></R_GridTextColumn>
    </R_GridColumns>
</R_Grid>
```

## Template 12: Exception Handling Pattern
```csharp
public async Task MethodName()
{
    var loEx = new R_Exception();
    
    try
    {
        // Your code here
    }
    catch (Exception ex)
    {
        loEx.Add(ex);
    }
    
    loEx.ThrowExceptionIfErrors();
}
```

## Template 13: LostFocus Event Pattern (R_BlazorFrontEnd.Controls)
```razor
<!-- R_TextBox -->
<R_TextBox @bind-Value="@viewModel.FieldValue"
           OnLostFocused="OnFieldLostFocused"/>

<!-- R_ComboBox -->
<R_ComboBox Data="@viewModel.DataList"
            @bind-Value="@viewModel.SelectedValue"
            ValueField="@nameof(DTO.Code)"
            TextField="@nameof(DTO.Name)"
            OnLostFocused="OnComboBoxLostFocused"/>

<!-- R_NumericTextBox -->
<R_NumericTextBox TValue="int" 
                  @bind-Value="@viewModel.NumericValue"
                  OnLostFocused="OnNumericLostFocused"/>

<!-- R_Grid (Cell Events) -->
<R_Grid DataSource="@viewModel.DataList"
        R_CellLostFocused="@OnCellLostFocused">
</R_Grid>
```

**Event Handler Signatures:**
```csharp
// Input components
public async Task OnFieldLostFocused() { }

// Grid cell events
public async Task OnCellLostFocused(R_CellLostFocusedEventArgs eventArgs) { }
```

## Template 13: Warning Handling Report Pattern
```markdown
BUILD SUMMARY - Project: {ProjectName}
✓ Compilation: SUCCESS
⚠ Warnings: {Count} found
  - Code Warnings: {Count} (FIXED/NEEDS FIXING)
  - External Warnings: {Count} (DOCUMENTED)
  - Infrastructure Warnings: {Count} (ACCEPTABLE)

DETAILED WARNING ANALYSIS:
- CS####: {Description} - FIXED/NEEDS FIXING
- NU####: {Description} - External dependency issue, cannot fix
- MSB####: {Description} - SDK version conflict, acceptable
```

---

# NOTE: Copy-paste templates exactly. No variations allowed.