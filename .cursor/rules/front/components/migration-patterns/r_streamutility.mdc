---
description: "Migration pattern for R_StreamUtility (NET4) → Native Streaming Pattern (NET6)"
alwaysApply: false
---

# R_StreamUtility (NET4) → Native Streaming Pattern (NET6)

## Purpose
- Migrate NET4 `R_StreamUtility(Of Byte()).ReadFromMessage()` in Front layer and `R_StreamUtility(Of Byte()).WriteToMessage()` in Service layer.
- NET6 uses native streaming patterns; `R_StreamUtility` is deprecated and not needed.

## Rules

### Front Layer Migration
- NET4: `R_StreamUtility(Of Byte()).ReadFromMessage(loRtn)` followed by `R_Utility.R_CombineData<T>(loTemp)`.
- NET6: **Must follow streaming pattern** using `R_HTTPClientWrapper.R_APIRequestStreamingObject<T>()` in Model layer.
- No `ReadFromMessage` call needed; streaming handled automatically by the framework.

### Service Layer Migration
- NET4: `R_StreamUtility(Of Byte()).WriteToMessage(loList.AsEnumerable, "methodName")`.
- NET6: **Must follow streaming pattern** where Controller returns `IAsyncEnumerable<T>` directly.
- No `WriteToMessage` call needed; framework handles streaming automatically.

## NET4 → NET6 Mapping
- NET4 Front: `R_StreamUtility(Of Byte()).ReadFromMessage()` → NET6: Follow streaming pattern in Model layer.
- NET4 Service: `R_StreamUtility(Of Byte()).WriteToMessage()` → NET6: Follow streaming pattern in Controller layer.
- `R_StreamUtility` is not available in NET6; **must use native streaming patterns** instead.

## References
- `.cursor/rules/patterns/streaming_pattern.mdc` (Complete streaming pattern overview)
- `.cursor/rules/patterns/model_streaming_API_pattern.mdc` (Model streaming implementation)
- `.cursor/rules/patterns/service_streaming_controller_pattern.mdc` (Controller streaming implementation)
- `.cursor/rules/patterns/viewmodel_streaming_method_pattern.mdc` (ViewModel streaming method pattern)
- `.cursor/rules/patterns/viewmodel_streaming_context_pattern.mdc` (ViewModel streaming context pattern)
- `.cursor/rules/patterns/model_streaming_vs_nonstreaming.mdc` (Streaming vs non-streaming differences)
- `.cursor/rules/service/service_streaming_context.mdc` (Service layer streaming context)
- `.cursor/rules/front/components/migration-patterns/r_setstreamingcontext.mdc` (R_SetStreamingContext migration)
- `.cursor/rules/front/components/migration-patterns/r_combinedata.mdc` (R_CombineData migration - used with R_StreamUtility)
