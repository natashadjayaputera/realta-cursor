---
alwaysApply: false
priority: HIGH
glob: "*ToCSharpBatch*"
---

# BATCH RULES

### Back Layer Only
- Batch methods are implemented ONLY in Back layer
- These methods are NOT exposed through Common interfaces

### Class Structure
- **Batch Class**: `{ProgramName}BatchCls.cs` - Standalone class (NO inheritance from `R_BusinessObjectAsync`, MUST inherit `R_IBatchProcess`)
- **Constructor Pattern**: Include Logger and ActivitySource initialization
- **Location**: Same Back project as main business logic class

### Constructor Pattern
```csharp
private readonly Logger{ProgramName} _logger;
private readonly ActivitySource _activitySource;

public {ProgramName}BatchCls()
{
    _logger = Logger{ProgramName}.R_GetInstanceLogger();
    _activitySource = {ProgramName}Activity.R_GetInstanceActivitySource();
}
```
### Query and Stored Procedure
- No modifications to SQL queries or stored procedures

## Rules
- Batch methods are Back Project-only and Front Project-Only implementations
- Do NOT add batch methods to Common interfaces
- Maintain exact stored procedure compatibility
- Batch methods MUST be in separate `{ProgramName}BatchCls.cs` class
- Batch class MUST include Logger and ActivitySource initialization

## Violations
- ❌ Adding batch methods to Common interfaces
- ❌ Exposing batch methods through Service layer
- ❌ Modifying stored procedure names or parameters
- ❌ Using streaming patterns for batch operations
- ❌ Batch methods in main business logic class
- ❌ Batch class without Logger/ActivitySource initialization