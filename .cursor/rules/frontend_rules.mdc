---
alwaysApply: false
priority: HIGH
glob: "*ToCSharpFront*"
---

# FRONTEND LAYER RULES

## Project Structure
- Location: `FRONT/{ProgramName}Front/`
- Target: `net6.0`
- SDK: `Microsoft.NET.Sdk.Razor`

## .csproj Template
```xml
<Project Sdk="Microsoft.NET.Sdk.Razor">
	<PropertyGroup>
		<TargetFramework>net6.0</TargetFramework>
		<LangVersion>10.0</LangVersion>
		<Nullable>enable</Nullable>
		<ImplicitUsings>disable</ImplicitUsings>
	</PropertyGroup>

	<ItemGroup>
		<SupportedPlatform Include="browser" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.AspNetCore.Components.Web" Version="6.0.36" />
	</ItemGroup>

	<ItemGroup>
		<Reference Include="R_BlazorFrontEnd">
			<HintPath>..\..\..\..\SYSTEM\SOURCE\LIBRARY\Front\R_BlazorFrontEnd.dll</HintPath>
		</Reference>
		<Reference Include="R_BlazorFrontEnd.Controls">
			<HintPath>..\..\..\..\SYSTEM\SOURCE\LIBRARY\Front\R_BlazorFrontEnd.Controls.dll</HintPath>
		</Reference>
		<Reference Include="BlazorClientHelper">
			<HintPath>..\..\..\..\SYSTEM\SOURCE\LIBRARY\Menu\BlazorClientHelper.dll</HintPath>
		</Reference>
	</ItemGroup>
</Project>
```

## Component Patterns

### R_ComboBox (Template 7)
```razor
<R_ComboBox Data="@viewModel.DataList"
            @bind-Value="@viewModel.SelectedValue"
            ValueField="@nameof(DTO.PropertyName)"
            TextField="@nameof(DTO.DisplayName)">
</R_ComboBox>
```

### R_Grid Inquiry (Template 8)
```razor
<R_Grid @ref="@_gridRef"
        DataSource="@viewModel.DataList"
        R_GridType="@R_eGridType.Original"
        R_ServiceGetListRecord="@Grid_ServiceGetListRecord">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(DTO.Property)" HeaderText="Header"></R_GridTextColumn>
    </R_GridColumns>
</R_Grid>
```

### R_Grid CRUD (Template 9)
```razor
<R_Grid @ref="@_gridRef"
        DataSource="@viewModel.DataList"
        R_ConductorSource="@_conductorRef"
        R_GridType="@R_eGridType.Navigator"
        R_ServiceGetListRecord="@Grid_ServiceGetListRecord">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(DTO.Property)" HeaderText="Header"></R_GridTextColumn>
    </R_GridColumns>
</R_Grid>
```

### R_Button Pattern
```razor
<R_Button OnClick="OnRefreshClicked">
    @Localizer["btnRefresh"]
</R_Button>
```

### R_Lookup Pattern
```razor
<R_ItemLayout auto="true">
    <R_Lookup R_ConductorSource="@_conductorRef"
              R_Before_Open_Lookup="R_Before_Open_LookupDepartment"
              R_After_Open_Lookup="R_After_Open_LookupDepartment">
        ...
    </R_Lookup>
</R_ItemLayout>
```

## Layout Rules
- Each R_StackLayout Row must have column sum ≤ 12
- Use nested R_StackLayout Row="true" for each row
- Last R_ItemLayout has `auto="false"`

## Using Statements
- All @using statements in _Imports.razor
- NO @using in .razor files

## Localizer Integration
```csharp
[Inject] private R_ILocalizer<{ProgramName}FrontResources.Resources_Dummy_Class> Localizer { get; set; } = default!;
```

## MessageBoxService
```csharp
[Inject] public R_MessageBoxService MessageBoxService { get; set; } = default!;
```

## Violations
- ❌ Using `DataSource` instead of `Data` for R_ComboBox
- ❌ R_Conductor for inquiry programs
- ❌ Using `Text` parameter on R_Button
- ❌ R_Lookup without R_ItemLayout wrapper
- ❌ @using statements in .razor files
- ❌ Hardcoded strings instead of Localizer